<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ì–û–†–î–û–°–¢–¨ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600&family=Oswald:wght@500;700&display=swap" rel="stylesheet">

    <!-- Three.js & GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- Postprocessing -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            background-color: #050505;
            color: #fff;
            font-family: 'Manrope', sans-serif;
            overflow-x: hidden;
        }

        /* --- BACKGROUND RAYS --- */
        #rays-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; 
            pointer-events: none;
            opacity: 0;
        }

        /* --- 3D SECTION --- */
        #pin-container {
            width: 100%;
            height: 100vh;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }

        #webgl-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        /* --- GALLERY SECTION --- */
        #gallery-section {
            position: relative;
            z-index: 20;
            background-color: #050505;
            padding: 100px 5%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .gallery-header { text-align: center; margin-bottom: 60px; }
        .gallery-header h2 { 
            font-family: 'Oswald', sans-serif; 
            font-size: clamp(2rem, 5vw, 3rem); 
            text-transform: uppercase; margin: 0; color: #fff; 
        }
        .gallery-header p { color: #888; margin-top: 15px; font-weight: 300; font-size: 1.1rem; letter-spacing: 0.05em; }

        .gallery-grid {
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px; width: 100%; max-width: 1400px;
        }

        .project-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 4px; overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;
        }
        .project-card:hover { transform: translateY(-10px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-color: #d4a373; }

        .card-image {
            width: 100%; height: 250px; background: linear-gradient(45deg, #1a1a1a, #2a2a2a);
            display: flex; align-items: center; justify-content: center; position: relative;
        }
        .card-image::after { content: 'VIEW 3D'; font-family: 'Oswald'; color: rgba(255,255,255,0.1); font-size: 2rem; font-weight: 700; }

        .card-info { padding: 25px; }
        .card-title { font-family: 'Oswald'; font-size: 1.5rem; margin: 0 0 10px 0; color: #fff; }
        .card-specs { display: flex; gap: 15px; margin-bottom: 20px; font-size: 0.9rem; color: #888; flex-wrap: wrap; }
        .card-specs span { display: flex; align-items: center; gap: 5px; }
        .card-price { font-size: 1.2rem; color: #d4a373; font-weight: 600; letter-spacing: 0.05em; }

        /* --- CONSULTATION FORM SECTION --- */
        #consultation-section {
            position: relative;
            z-index: 20;
            background-color: #050505;
            padding: 80px 5% 120px 5%;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-top: 1px solid rgba(255,255,255,0.05);
            margin-bottom: 100px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è –¥–æ–∫-–ø–∞–Ω–µ–ª–∏ */
        }

        .form-wrapper {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.02);
            padding: 40px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
        }

        .form-title {
            font-family: 'Oswald', sans-serif;
            font-size: 2rem;
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
        }

        .form-group { margin-bottom: 20px; position: relative; }

        .form-input {
            width: 100%; padding: 15px; background: rgba(0, 0, 0, 0.3);
            border: 1px solid #333; border-radius: 4px; color: #fff;
            font-family: 'Manrope', sans-serif; font-size: 1rem;
            box-sizing: border-box; transition: 0.3s;
        }
        .form-input:focus { outline: none; border-color: #00eaff; box-shadow: 0 0 10px rgba(0, 234, 255, 0.2); }

        .phone-input-wrapper { display: flex; position: relative; }
        .country-select {
            position: absolute; left: 1px; top: 1px; bottom: 1px; width: 80px;
            background: rgba(255,255,255,0.05); display: flex; align-items: center;
            justify-content: center; gap: 5px; cursor: pointer;
            border-right: 1px solid #333; border-radius: 4px 0 0 4px; z-index: 5; transition: background 0.3s;
        }
        .country-select:hover { background: rgba(255,255,255,0.1); }
        .selected-flag { font-size: 1.5rem; }
        .dropdown-arrow { font-size: 0.7rem; color: #888; }
        .phone-field { padding-left: 95px !important; }
        
        .country-list {
            position: absolute; top: 100%; left: 0; width: 100%; max-height: 250px;
            overflow-y: auto; background: #111; border: 1px solid #333; border-radius: 4px;
            z-index: 10; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }
        .country-list.active { display: block; }
        .country-item {
            padding: 12px 15px; display: flex; align-items: center; gap: 15px;
            cursor: pointer; transition: 0.2s; border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .country-item:last-child { border-bottom: none; }
        .country-item:hover { background: rgba(255,255,255,0.1); }
        .c-flag { font-size: 1.5rem; }
        .c-name { flex-grow: 1; font-size: 0.9rem; color: #ccc; }
        .c-code { font-size: 0.9rem; color: #d4a373; font-weight: 600; }
        .country-list::-webkit-scrollbar { width: 6px; }
        .country-list::-webkit-scrollbar-track { background: #0a0a0a; }
        .country-list::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }

        .checkbox-wrapper { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 30px; font-size: 0.85rem; color: #888; }
        .checkbox-wrapper input[type="checkbox"] { margin-top: 3px; accent-color: #d4a373; cursor: pointer; }

        .submit-btn {
            width: 100%; padding: 18px; background: #d4a373; color: #050505;
            border: none; border-radius: 4px; font-family: 'Oswald', sans-serif;
            font-size: 1.1rem; text-transform: uppercase; font-weight: 700;
            cursor: pointer; transition: 0.3s; letter-spacing: 0.05em;
        }
        .submit-btn:hover { background: #fff; box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); }

        /* --- DOCK PANEL (NEW) --- */
        .dock-wrapper {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100; /* –°–∞–º—ã–π –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π */
            display: flex;
            align-items: flex-end;
            gap: 12px;
            padding: 10px 15px;
            background: rgba(6, 0, 16, 0.6); /* –¢–µ–º–Ω—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .dock-item {
            width: 50px; /* –ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä */
            height: 50px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition: width 0.1s ease-out, height 0.1s ease-out, transform 0.1s ease-out, background 0.3s;
            color: #fff;
        }

        .dock-item:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: #d4a373;
            color: #d4a373;
        }

        .dock-item svg {
            width: 50%;
            height: 50%;
            pointer-events: none;
        }

        /* Tooltip –¥–ª—è –¥–æ–∫–∞ */
        .dock-tooltip {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: #060010;
            border: 1px solid #333;
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 0.8rem;
            color: #fff;
            opacity: 0;
            pointer-events: none;
            transition: 0.2s;
            white-space: nowrap;
            font-family: 'Manrope', sans-serif;
        }

        .dock-item:hover .dock-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* --- UI ELEMENTS --- */
        .hero-section, .feature-section {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; box-sizing: border-box;
        }
        
        .hero-section {
            align-items: center; text-align: center;
            background: transparent; 
            z-index: 2; 
        }

        h1.main-title { 
            font-family: 'Oswald', sans-serif; 
            font-size: 18vw; 
            line-height: 1.0; 
            margin: 0; text-transform: uppercase; font-weight: 700; 
            letter-spacing: 0.05em;
            padding-bottom: 10px;
            
            background: linear-gradient(120deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.8) 40%, #fff 50%, rgba(255,255,255,0.8) 60%, rgba(255,255,255,0.8) 100%);
            background-size: 300% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 5s linear infinite;
        }

        @keyframes shine { 0% { background-position: 0% 50%; } 100% { background-position: 300% 50%; } }
        
        p.slogan { font-size: 1.2rem; margin-top: 20px; font-weight: 300; letter-spacing: 0.5em; text-transform: uppercase; color: #bbb; padding: 0 20px; }

        .feature-section { z-index: 10; pointer-events: none; padding: 0 5%; }
        
        #sec-roof, #sec-walls { align-items: flex-end; }
        #sec-floor, #sec-construction { align-items: center; text-align: center; }
        #sec-contract, #sec-blueprint { align-items: flex-start; padding-left: 10%; }
        #sec-keys { align-items: flex-end; padding-right: 10%; }

        .feature-content {
            width: 350px; opacity: 0; background: rgba(0, 0, 0, 0.4); 
            padding: 35px; border-radius: 8px; backdrop-filter: blur(5px); 
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0,0,0,0.1); pointer-events: auto;
            text-shadow: 0 2px 5px rgba(0,0,0,0.9);
            transition: width 0.3s, padding 0.3s;
        }
        
        #sec-roof .feature-content, #sec-walls .feature-content { border-left: 4px solid #d4a373; }
        #sec-floor .feature-content, #sec-construction .feature-content { border-left: none; border-top: 4px solid #d4a373; }
        #sec-contract .feature-content { border-left: 4px solid #fff; }
        #sec-blueprint .feature-content { border-left: 4px solid #0088ff; }
        
        .feature-num { font-family: 'Oswald'; font-size: 6rem; line-height: 1; color: rgba(255,255,255,0.1); position: absolute; top: -30px; left: -20px; font-weight: 700; z-index: -1; }
        #sec-blueprint .feature-num { color: rgba(0, 136, 255, 0.1); }
        .feature-title { font-family: 'Oswald', sans-serif; font-size: 2.5rem; margin: 0 0 20px 0; color: #fff; line-height: 1.0; text-transform: uppercase; letter-spacing: 0.02em; position: relative; }
        .feature-text { font-size: 1rem; line-height: 1.6; color: #ddd; font-weight: 300; margin-bottom: 20px; }
        .layer-list { list-style: none; padding: 0; margin: 0; }
        .layer-list li { padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.2); display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; }
        .layer-list li strong { color: #d4a373; font-weight: 600; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.05em; }
        .layer-list li span { color: #eee; font-size: 0.8rem; }

        .timeline-wrapper {
            position: fixed; left: 50px; top: 50%; transform: translateY(-50%);
            height: 40vh; z-index: 20; display: flex; flex-direction: column;
            justify-content: space-between; opacity: 0; pointer-events: none;
            transition: opacity 1s ease; 
        }
        .timeline-line { position: absolute; left: 9px; top: 0; bottom: 0; width: 2px; background: rgba(255,255,255,0.1); }
        .timeline-item { position: relative; padding-left: 30px; color: #555; transition: 0.3s; font-family: 'Oswald'; text-transform: uppercase; letter-spacing: 0.1em; font-size: 0.9rem; font-weight: 600; }
        .timeline-item::before { content: ''; position: absolute; left: 5px; top: 50%; transform: translateY(-50%); width: 10px; height: 10px; background: #333; border-radius: 50%; border: 2px solid #555; transition: 0.3s; }
        .timeline-item.active { color: #fff; }
        .timeline-item.active::before { background: #d4a373; border-color: #d4a373; box-shadow: 0 0 10px #d4a373; }

        .scroll-indicator { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); opacity: 0; z-index: 3; }
        .mouse { width: 20px; height: 34px; border: 1px solid rgba(255,255,255,0.3); border-radius: 12px; position: relative; }
        .wheel { width: 2px; height: 6px; background: white; border-radius: 2px; position: absolute; top: 6px; left: 50%; transform: translateX(-50%); animation: scrollWheel 2s infinite; }
        @keyframes scrollWheel { 0% { top: 6px; opacity: 1; } 100% { top: 18px; opacity: 0; } }

        /* --- MOBILE ADAPTATION --- */
        @media (max-width: 768px) {
            h1.main-title { font-size: 20vw; }
            .timeline-wrapper { display: none; }
            .feature-section { padding: 0 20px; justify-content: flex-end; padding-bottom: 120px; }
            #sec-roof, #sec-walls, #sec-floor, #sec-construction, #sec-contract, #sec-blueprint, #sec-keys {
                align-items: center; text-align: center; padding-left: 20px; padding-right: 20px;
            }
            .feature-content { width: 100%; max-width: 400px; padding: 25px; border-left: none !important; border-top: 4px solid; }
            #sec-roof .feature-content, #sec-walls .feature-content { border-color: #d4a373; }
            #sec-contract .feature-content { border-color: #fff; }
            #sec-blueprint .feature-content { border-color: #0088ff; }
            #sec-keys .feature-content { border-color: #ffd700; }
            .feature-num { top: -40px; left: 50%; transform: translateX(-50%); }
            
            #consultation-section { padding: 60px 20px 100px 20px; margin-bottom: 80px; }
            .form-wrapper { padding: 25px; }
            
            .dock-wrapper { gap: 8px; padding: 8px 12px; bottom: 10px; }
            .dock-item { width: 45px; height: 45px; }
        }
    </style>
</head>
<body>

    <!-- –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –õ–£–ß–ï–ô -->
    <div id="rays-container"></div>

    <div id="pin-container">
        <div id="webgl-container"></div>

        <div class="timeline-wrapper" id="project-timeline">
            <div class="timeline-line"></div>
            <div class="timeline-item" id="tl-contract">–î–æ–≥–æ–≤–æ—Ä</div>
            <div class="timeline-item" id="tl-project">–ü—Ä–æ–µ–∫—Ç</div>
            <div class="timeline-item" id="tl-build">–°—Ç—Ä–æ–π–∫–∞</div>
            <div class="timeline-item" id="tl-keys">–°–¥–∞—á–∞</div>
        </div>

        <section class="hero-section" id="sec-hero">
            <div class="hero-content">
                <h1 class="main-title">–ì–û–†–î–û–°–¢–¨</h1>
                <p class="slogan">–ü–æ—Å—Ç—Ä–æ–∏–º –¥–æ–º, –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç–µ –≥–æ—Ä–¥–∏—Ç—å—Å—è</p>
            </div>
            <div class="scroll-indicator"><div class="mouse"><div class="wheel"></div></div></div>
        </section>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
        <section class="feature-section" id="sec-roof">
            <div class="feature-content">
                <span class="feature-num">01</span>
                <h2 class="feature-title">–ö—Ä–æ–≤–ª—è<br>Pro</h2>
                <p class="feature-text">–ò–¥–µ–∞–ª—å–Ω–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è. –í–∏–¥–∏–º–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤.</p>
                <ul class="layer-list">
                    <li><strong>–ü–æ–∫—Ä—ã—Ç–∏–µ</strong> <span>–§–∞–ª—å—Ü (–ì—Ä–∞—Ñ–∏—Ç)</span></li>
                    <li><strong>–£—Ç–µ–ø–ª–µ–Ω–∏–µ</strong> <span>300–º–º</span></li>
                    <li><strong>–ö–∞—Ä–∫–∞—Å</strong> <span>–°—É—Ö–∞—è –¥–æ—Å–∫–∞</span></li>
                </ul>
            </div>
        </section>

        <section class="feature-section" id="sec-walls">
            <div class="feature-content">
                <span class="feature-num">02</span>
                <h2 class="feature-title">–°—Ç–µ–Ω–∞<br>–≤ –†–∞–∑—Ä–µ–∑–µ</h2>
                <p class="feature-text">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è —Ç–µ–ø–ª–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞. –≠–∫–æ–ª–æ–≥–∏—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.</p>
                <ul class="layer-list">
                    <li><strong>–§–∞—Å–∞–¥</strong> <span>–õ–∏—Å—Ç–≤–µ–Ω–Ω–∏—Ü–∞</span></li>
                    <li><strong>–£—Ç–µ–ø–ª–∏—Ç–µ–ª—å</strong> <span>Rockwool</span></li>
                    <li><strong>–û—Å–Ω–æ–≤–∞</strong> <span>LVL –ë—Ä—É—Å</span></li>
                </ul>
            </div>
        </section>

        <section class="feature-section" id="sec-floor">
            <div class="feature-content">
                <span class="feature-num">03</span>
                <h2 class="feature-title">–£–®–ü<br>–§—É–Ω–¥–∞–º–µ–Ω—Ç</h2>
                <p class="feature-text">–£—Ç–µ–ø–ª–µ–Ω–Ω–∞—è —à–≤–µ–¥—Å–∫–∞—è –ø–ª–∏—Ç–∞ —Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–ø–ª—ã–º –ø–æ–ª–æ–º.</p>
            </div>
        </section>

        <section class="feature-section" id="sec-contract">
            <div class="feature-content">
                <span class="feature-num">04</span>
                <h2 class="feature-title">–î–æ–≥–æ–≤–æ—Ä</h2>
                <p class="feature-text">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å. –§–∏–∫—Å–∏—Ä—É–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ —Å—Ä–æ–∫–∏.</p>
            </div>
        </section>

        <section class="feature-section" id="sec-blueprint">
            <div class="feature-content">
                <span class="feature-num">05</span>
                <h2 class="feature-title">–¢–æ—á–Ω—ã–π<br>–ü—Ä–æ–µ–∫—Ç</h2>
                <p class="feature-text">–ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Å –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ BIM-–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.</p>
            </div>
        </section>

        <section class="feature-section" id="sec-construction">
            <div class="feature-content">
                <span class="feature-num">06</span>
                <h2 class="feature-title">–≠—Ç–∞–ø—ã<br>–°–±–æ—Ä–∫–∏</h2>
                <p class="feature-text">–û—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞ –¥–æ –∫—Ä–æ–≤–ª–∏. –í–∞—à –¥–æ–º —Ä–∞—Å—Ç–µ—Ç –Ω–∞ –≥–ª–∞–∑–∞—Ö.</p>
            </div>
        </section>

        <section class="feature-section" id="sec-keys">
            <div class="feature-content">
                <span class="feature-num">07</span>
                <h2 class="feature-title">–ö–ª—é—á–∏</h2>
                <p class="feature-text">–§–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø. –ú—ã –≤—Ä—É—á–∞–µ–º –≤–∞–º –∫–ª—é—á–∏. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –¥–æ–º–æ–π.</p>
            </div>
        </section>
    </div>

    <!-- –ì–ê–õ–ï–†–ï–Ø -->
    <section id="gallery-section">
        <div class="gallery-header">
            <h2>–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –æ—Å–Ω–æ–≤—É –¥–ª—è –≤–∞—à–µ–≥–æ –±—É–¥—É—â–µ–≥–æ –¥–æ–º–∞</p>
        </div>
        
        <div class="gallery-grid">
            <div class="project-card">
                <div class="card-image" style="background: linear-gradient(135deg, #1c1c1c, #362a22);"></div>
                <div class="card-info">
                    <h3 class="card-title">Nordic ONE</h3>
                    <div class="card-specs"><span>140 –º¬≤</span><span>|</span><span>3 –°–ø–∞–ª—å–Ω–∏</span></div>
                    <div class="card-price">–æ—Ç 8.5 –º–ª–Ω ‚ÇΩ</div>
                </div>
            </div>
            <div class="project-card">
                <div class="card-image" style="background: linear-gradient(135deg, #1c1c1c, #2a3633);"></div>
                <div class="card-info">
                    <h3 class="card-title">Forest Line</h3>
                    <div class="card-specs"><span>180 –º¬≤</span><span>|</span><span>4 –°–ø–∞–ª—å–Ω–∏</span></div>
                    <div class="card-price">–æ—Ç 12.0 –º–ª–Ω ‚ÇΩ</div>
                </div>
            </div>
            <div class="project-card">
                <div class="card-image" style="background: linear-gradient(135deg, #1c1c1c, #362222);"></div>
                <div class="card-info">
                    <h3 class="card-title">Barn House X</h3>
                    <div class="card-specs"><span>110 –º¬≤</span><span>|</span><span>2 –°–ø–∞–ª—å–Ω–∏ + –õ–æ—Ñ—Ç</span></div>
                    <div class="card-price">–æ—Ç 7.2 –º–ª–Ω ‚ÇΩ</div>
                </div>
            </div>
        </div>
    </section>

    <!-- –§–û–†–ú–ê –û–ë–†–ê–¢–ù–û–ô –°–í–Ø–ó–ò -->
    <section id="consultation-section">
        <div class="form-wrapper">
            <h2 class="form-title">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</h2>
            <form onsubmit="event.preventDefault(); alert('–°–ø–∞—Å–∏–±–æ! –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.');">
                <div class="form-group">
                    <input type="text" class="form-input" placeholder="–í–∞—à–µ –ò–º—è" required>
                </div>
                <div class="form-group">
                    <div class="phone-input-wrapper">
                        <div class="country-select" id="country-select">
                            <span class="selected-flag" id="current-flag">üá∑üá∫</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </div>
                        <div class="country-list" id="country-list"></div>
                        <input type="tel" id="phone-input" class="form-input phone-field" value="+7 " required>
                    </div>
                </div>
                <div class="checkbox-wrapper">
                    <input type="checkbox" id="agree" required>
                    <label for="agree">
                        –ù–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É, –≤—ã –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                    </label>
                </div>
                <button type="submit" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
            </form>
        </div>
    </section>

    <!-- –î–û–ö –ü–ê–ù–ï–õ–¨ (–ù–û–í–ê–Ø) -->
    <div class="dock-wrapper" id="dock">
        <!-- –ì–õ–ê–í–ù–ê–Ø -->
        <div class="dock-item" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            <div class="dock-tooltip">–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <!-- –ì–ê–õ–ï–†–ï–Ø -->
        <div class="dock-item" onclick="document.getElementById('gallery-section').scrollIntoView({behavior: 'smooth'})">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
            <div class="dock-tooltip">–ü—Ä–æ–µ–∫—Ç—ã</div>
        </div>
        <!-- –û –ù–ê–° (3D –≠–¢–ê–ü–´) -->
        <div class="dock-item" onclick="document.getElementById('sec-roof').scrollIntoView({behavior: 'smooth'})">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>
            <div class="dock-tooltip">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</div>
        </div>
        <!-- –ö–û–ù–¢–ê–ö–¢–´ -->
        <div class="dock-item" onclick="document.getElementById('consultation-section').scrollIntoView({behavior: 'smooth'})">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
            <div class="dock-tooltip">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
        </div>
    </div>

    <!-- –°–ö–†–ò–ü–¢ 1: LIGHT RAYS -->
    <script type="module">
        import { Renderer, Program, Triangle, Mesh } from 'https://esm.sh/ogl@0.0.96';

        const container = document.getElementById('rays-container');

        const config = {
            raysOrigin: 'top-center',
            raysColor: '#ffffff', 
            raysSpeed: 1.5,
            lightSpread: 0.8,
            rayLength: 1.2,
            followMouse: true,
            mouseInfluence: 0.1,
            noiseAmount: 0.1,
            distortion: 0.05
        };

        const hexToRgb = hex => {
            const m = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return m ? [parseInt(m[1], 16) / 255, parseInt(m[2], 16) / 255, parseInt(m[3], 16) / 255] : [1, 1, 1];
        };

        const getAnchorAndDir = (origin, w, h) => {
            const outside = 0.2;
            switch (origin) {
                case 'top-left': return { anchor: [0, -outside * h], dir: [0, 1] };
                case 'top-right': return { anchor: [w, -outside * h], dir: [0, 1] };
                case 'left': return { anchor: [-outside * w, 0.5 * h], dir: [1, 0] };
                case 'right': return { anchor: [(1 + outside) * w, 0.5 * h], dir: [-1, 0] };
                case 'bottom-left': return { anchor: [0, (1 + outside) * h], dir: [0, -1] };
                case 'bottom-center': return { anchor: [0.5 * w, (1 + outside) * h], dir: [0, -1] };
                case 'bottom-right': return { anchor: [w, (1 + outside) * h], dir: [0, -1] };
                default: return { anchor: [0.5 * w, -outside * h], dir: [0, 1] };
            }
        };

        const renderer = new Renderer({ dpr: Math.min(window.devicePixelRatio, 2), alpha: true });
        const gl = renderer.gl;
        container.appendChild(gl.canvas);

        const vert = `
            attribute vec2 position;
            varying vec2 vUv;
            void main() {
                vUv = position * 0.5 + 0.5;
                gl_Position = vec4(position, 0.0, 1.0);
            }`;

        const frag = `
            precision highp float;
            uniform float iTime;
            uniform vec2 iResolution;
            uniform vec2 rayPos;
            uniform vec2 rayDir;
            uniform vec3 raysColor;
            uniform float raysSpeed;
            uniform float lightSpread;
            uniform float rayLength;
            uniform float pulsating;
            uniform float fadeDistance;
            uniform float saturation;
            uniform vec2 mousePos;
            uniform float mouseInfluence;
            uniform float noiseAmount;
            uniform float distortion;
            varying vec2 vUv;

            float noise(vec2 st) {
                return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
            }

            float rayStrength(vec2 raySource, vec2 rayRefDirection, vec2 coord, float seedA, float seedB, float speed) {
                vec2 sourceToCoord = coord - raySource;
                vec2 dirNorm = normalize(sourceToCoord);
                float cosAngle = dot(dirNorm, rayRefDirection);
                float distortedAngle = cosAngle + distortion * sin(iTime * 2.0 + length(sourceToCoord) * 0.01) * 0.2;
                float spreadFactor = pow(max(distortedAngle, 0.0), 1.0 / max(lightSpread, 0.001));
                float distance = length(sourceToCoord);
                float maxDistance = iResolution.x * rayLength;
                float lengthFalloff = clamp((maxDistance - distance) / maxDistance, 0.0, 1.0);
                float fadeFalloff = clamp((iResolution.x * fadeDistance - distance) / (iResolution.x * fadeDistance), 0.5, 1.0);
                float pulse = pulsating > 0.5 ? (0.8 + 0.2 * sin(iTime * speed * 3.0)) : 1.0;
                float baseStrength = clamp(
                    (0.45 + 0.15 * sin(distortedAngle * seedA + iTime * speed)) +
                    (0.3 + 0.2 * cos(-distortedAngle * seedB + iTime * speed)),
                    0.0, 1.0
                );
                return baseStrength * lengthFalloff * fadeFalloff * spreadFactor * pulse;
            }

            vec4 calcColor(vec2 fragCoord) {
                vec2 coord = vec2(fragCoord.x, iResolution.y - fragCoord.y);
                vec2 finalRayDir = rayDir;
                if (mouseInfluence > 0.0) {
                    vec2 mouseScreenPos = mousePos * iResolution.xy;
                    vec2 mouseDirection = normalize(mouseScreenPos - rayPos);
                    finalRayDir = normalize(mix(rayDir, mouseDirection, mouseInfluence));
                }
                
                vec4 rays1 = vec4(1.0) * rayStrength(rayPos, finalRayDir, coord, 36.2214, 21.11349, 1.5 * raysSpeed);
                vec4 rays2 = vec4(1.0) * rayStrength(rayPos, finalRayDir, coord, 22.3991, 18.0234, 1.1 * raysSpeed);
                
                vec4 fragColor = rays1 + rays2; 
                
                if (noiseAmount > 0.0) {
                    float n = noise(coord * 0.01 + iTime * 0.1);
                    fragColor.rgb *= (1.0 - noiseAmount + noiseAmount * n);
                }

                fragColor.rgb *= raysColor * 2.0;
                fragColor.a = (fragColor.r + fragColor.g + fragColor.b) / 3.0;

                return fragColor;
            }

            void main() {
                gl_FragColor = calcColor(gl_FragCoord.xy);
            }`;

        const uniforms = {
            iTime: { value: 0 },
            iResolution: { value: [0, 0] },
            rayPos: { value: [0, 0] },
            rayDir: { value: [0, 1] },
            raysColor: { value: hexToRgb(config.raysColor) },
            raysSpeed: { value: config.raysSpeed },
            lightSpread: { value: config.lightSpread },
            rayLength: { value: config.rayLength },
            pulsating: { value: 0 },
            fadeDistance: { value: 1.0 },
            saturation: { value: 1.0 },
            mousePos: { value: [0.5, 0.5] },
            mouseInfluence: { value: config.mouseInfluence },
            noiseAmount: { value: config.noiseAmount },
            distortion: { value: config.distortion }
        };

        const geometry = new Triangle(gl);
        const program = new Program(gl, { vertex: vert, fragment: frag, uniforms, transparent: true });
        const mesh = new Mesh(gl, { geometry, program });

        const mouse = { x: 0.5, y: 0.5 };

        function resize() {
            renderer.setSize(window.innerWidth, window.innerHeight);
            uniforms.iResolution.value = [gl.canvas.width, gl.canvas.height];
            const { anchor, dir } = getAnchorAndDir(config.raysOrigin, gl.canvas.width, gl.canvas.height);
            uniforms.rayPos.value = anchor;
            uniforms.rayDir.value = dir;
        }
        window.addEventListener('resize', resize, false);
        resize();

        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX / window.innerWidth;
            mouse.y = e.clientY / window.innerHeight;
        });

        requestAnimationFrame(update);
        function update(t) {
            requestAnimationFrame(update);
            uniforms.iTime.value = t * 0.001;
            uniforms.mousePos.value[0] += (mouse.x - uniforms.mousePos.value[0]) * 0.1;
            uniforms.mousePos.value[1] += (mouse.y - uniforms.mousePos.value[1]) * 0.1;
            renderer.render({ scene: mesh });
        }
    </script>

    <!-- –°–ö–†–ò–ü–¢ 2: –û–°–ù–û–í–ù–û–ô –°–ê–ô–¢ (THREE.JS) -->
    <script>
    (() => {
        // --- 3D & TEXTURE SETUP ---
        function createTexture(colorBase, noiseAmount, isWood=false) {
            const canvas = document.createElement('canvas');
            canvas.width = 1024; canvas.height = 1024;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = colorBase; 
            ctx.fillRect(0,0,1024,1024);
            for(let i=0; i<15000; i++) {
                ctx.fillStyle = `rgba(255,255,255, ${Math.random() * noiseAmount})`;
                if(isWood) ctx.fillRect(Math.random()*1024, Math.random()*1024, Math.random()*2, Math.random()*200+50);
                else ctx.fillRect(Math.random()*1024, Math.random()*1024, 1, 1);
            }
            if(isWood) {
                const planks = 24; const gap = 1024/planks;
                for(let i=0; i<planks; i++) {
                    ctx.fillStyle = 'rgba(0,0,0,0.3)'; ctx.fillRect(i*gap-2, 0, 4, 1024);
                }
            }
            const tex = new THREE.CanvasTexture(canvas);
            tex.wrapS = THREE.RepeatWrapping; tex.wrapT = THREE.RepeatWrapping;
            return tex;
        }
        const woodTex = createTexture('#8c5e35', 0.15, true);
        const roofTex = createTexture('#555555', 0.05, false);
        const deckTex = createTexture('#6b4d38', 0.1, true);
        
        function createFloorTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 512; canvas.height = 512;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#444444'; ctx.fillRect(0,0,512,512);
            ctx.strokeStyle = '#cc3300'; ctx.lineWidth = 10; ctx.lineCap = 'round';
            ctx.beginPath();
            for(let x=20; x<500; x+=40) {
                ctx.moveTo(x, 20); ctx.lineTo(x, 490);
                if(x < 460) { ctx.moveTo(x, 490); ctx.lineTo(x+40, 490); ctx.moveTo(x+40, 490); ctx.lineTo(x+40, 20); ctx.moveTo(x+40, 20); ctx.lineTo(x+80, 20); x+=40; }
            }
            ctx.stroke();
            return new THREE.CanvasTexture(canvas);
        }
        const floorTex = createFloorTexture();

        // --- –ú–ê–¢–ï–†–ò–ê–õ–´ ---
        const neonColor = new THREE.Color(0x00eaff); 
        neonColor.multiplyScalar(5.0); 

        const mats = {
            wood: new THREE.MeshStandardMaterial({ map: woodTex, roughness: 0.7, metalness: 0.1 }),
            deck: new THREE.MeshStandardMaterial({ map: deckTex, roughness: 0.9 }),
            roof: new THREE.MeshStandardMaterial({ map: roofTex, color: 0x999999, roughness: 0.4, metalness: 0.6 }),
            insulation: new THREE.MeshStandardMaterial({ color: 0xd4a373, roughness: 1.0 }),
            inner: new THREE.MeshStandardMaterial({ color: 0xeeeeee, roughness: 0.5 }),
            woodStruct: new THREE.MeshStandardMaterial({ color: 0x5c4033, roughness: 0.9 }),
            glass: new THREE.MeshPhysicalMaterial({ color: 0x8899aa, metalness: 0.1, roughness: 0.0, transmission: 0.6, transparent: true, thickness: 0.1, reflectivity: 0.8, clearcoat: 1.0, side: THREE.DoubleSide }),
            concrete: new THREE.MeshStandardMaterial({ color: 0x333333, roughness: 0.9 }),
            warmFloor: new THREE.MeshStandardMaterial({ map: floorTex, roughness: 0.8 }),
            frame: new THREE.MeshStandardMaterial({ color: 0x111111, roughness: 0.4, metalness: 0.8 }),
            blueprint: new THREE.LineBasicMaterial({ color: neonColor, transparent: true, opacity: 0.9, depthTest: false }),
            paper: new THREE.MeshStandardMaterial({ color: 0xffffff, roughness: 0.9 }),
            black: new THREE.MeshBasicMaterial({ color: 0x000000 })
        };

        const container = document.getElementById('webgl-container');
        const scene = new THREE.Scene();
        scene.background = null; 
        scene.fog = new THREE.FogExp2(0x050505, 0.015);

        const camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 2, 35);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.1; 
        
        container.appendChild(renderer.domElement);

        const composer = new THREE.EffectComposer(renderer);
        composer.addPass(new THREE.RenderPass(scene, camera));
        const bloomPass = new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        bloomPass.threshold = 0.85; bloomPass.strength = 0.2; bloomPass.radius = 0.5;
        composer.addPass(bloomPass);

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.4); scene.add(ambientLight);
        const sunLight = new THREE.DirectionalLight(0xffeebb, 1.3); sunLight.position.set(20, 30, 20); sunLight.castShadow = true; sunLight.shadow.mapSize.width = 2048; sunLight.shadow.mapSize.height = 2048; sunLight.shadow.bias = -0.0001; scene.add(sunLight);
        const rimLight = new THREE.SpotLight(0xaaccff, 2.5); rimLight.position.set(-20, 10, -20); rimLight.lookAt(0, 0, 0); scene.add(rimLight);
        const innerLight = new THREE.PointLight(0xffaa55, 0.5, 10); innerLight.position.set(0, 2, 0); scene.add(innerLight);

        // --- HOUSE GEOMETRY ---
        const houseGroup = new THREE.Group(); scene.add(houseGroup); houseGroup.visible = false; houseGroup.position.y = -15; 
        const blueprintGroup = new THREE.Group(); scene.add(blueprintGroup); blueprintGroup.visible = false;
        const contractGroup = new THREE.Group(); scene.add(contractGroup); contractGroup.visible = false;
        const paperSheet = new THREE.Mesh(new THREE.BoxGeometry(3, 4, 0.05), mats.paper); contractGroup.add(paperSheet);
        for(let i=0; i<7; i++) { const line = new THREE.Mesh(new THREE.PlaneGeometry(2, 0.15), mats.black); line.position.set(0, 1.2 - i*0.4, 0.03); contractGroup.add(line); }
        const stamp = new THREE.Mesh(new THREE.CircleGeometry(0.4, 32), new THREE.MeshBasicMaterial({color: 0xaa0000, transparent:true, opacity:0.7})); stamp.position.set(0.8, -1.3, 0.04); contractGroup.add(stamp);

        const M_W = 10.0; const M_D = 6.0; const M_H = 5.0; const R_H = 2.0; const R_W = 5.0; const R_D = 4.0;
        const risalitX = -M_W/2 + R_W/2; const risalitZ = M_D/2 + R_D/2;

        function createBox(w, h, d, mat, x, y, z, parent) { const m = new THREE.Mesh(new THREE.BoxGeometry(w, h, d), mat); m.position.set(x, y, z); m.castShadow = true; m.receiveShadow = true; if(parent) parent.add(m); return m; }
        function createWireframeBox(w, h, d, x, y, z) { const geo = new THREE.BoxGeometry(w, h, d); const edges = new THREE.EdgesGeometry(geo); const line = new THREE.LineSegments(edges, mats.blueprint); line.position.set(x, y, z); blueprintGroup.add(line); }
        createWireframeBox(8, 5, 6, 0, 2.5, 0);
        const roofWGeo = new THREE.ConeGeometry(6, 2.5, 4); const roofW = new THREE.LineSegments(new THREE.EdgesGeometry(roofWGeo), mats.blueprint); roofW.position.y = 5 + 1.25; roofW.rotation.y = Math.PI/4; blueprintGroup.add(roofW);

        const foundationGroup = new THREE.Group(); houseGroup.add(foundationGroup);
        const upperHouseGroup = new THREE.Group(); houseGroup.add(upperHouseGroup);
        const roofGroup = new THREE.Group(); upperHouseGroup.add(roofGroup);

        createBox(M_W+0.2, 0.5, M_D+0.2, mats.concrete, 0, -0.25, 0, foundationGroup);
        createBox(R_W+0.2, 0.5, R_D+0.2, mats.concrete, risalitX, -0.25, risalitZ, foundationGroup);
        createBox(M_W, 0.05, M_D, mats.warmFloor, 0, 0.03, 0, foundationGroup);
        createBox(R_W, 0.05, R_D, mats.warmFloor, risalitX, 0.03, risalitZ, foundationGroup);
        const deckWidth = M_W + 2.0; const deckDepth = 4.0;
        createBox(deckWidth, 0.2, deckDepth, mats.deck, 0, 0.1, M_D/2 + deckDepth/2, foundationGroup);

        createBox(M_W, M_H, 0.2, mats.wood, 0, M_H/2, -M_D/2+0.1, upperHouseGroup);
        createBox(0.2, M_H, M_D, mats.wood, -M_W/2+0.1, M_H/2, 0, upperHouseGroup);
        
        const rightWallGroup = new THREE.Group(); upperHouseGroup.add(rightWallGroup); rightWallGroup.position.set(M_W/2 - 0.1, M_H/2, 0);
        const l_thick = 0.15; const rw_d = M_D - 0.4; const sWinW = 2.0; const sWinH = 2.5;
        function createZLayer(thick, h, depth, mat, xOffset, winW, winH) {
            const g = new THREE.Group(); g.position.x = xOffset;
            const sideD = (depth-winW)/2; const topH = (h-winH)/2;
            createBox(thick, h, sideD, mat, 0, 0, -depth/2+sideD/2, g); createBox(thick, h, sideD, mat, 0, 0, depth/2-sideD/2, g);
            createBox(thick, topH, winW, mat, 0, h/2-topH/2, 0, g); createBox(thick, topH, winW, mat, 0, -h/2+topH/2, 0, g);
            rightWallGroup.add(g); return g;
        }
        const layInnerObj = createZLayer(l_thick, M_H, rw_d, mats.inner, -0.3, sWinW, sWinH);
        const layFrameObj = createZLayer(l_thick, M_H, rw_d, mats.woodStruct, -0.1, sWinW, sWinH);
        const layInsulObj = createZLayer(l_thick, M_H, rw_d, mats.insulation, 0.1, sWinW, sWinH);
        const layOuterObj = createZLayer(l_thick, M_H, rw_d, mats.wood, 0.3, sWinW, sWinH);

        const sideWinGroup = new THREE.Group(); sideWinGroup.position.set(0, 0, 0); layFrameObj.add(sideWinGroup);
        const fr = 0.1; createBox(fr*2, sWinH, fr, mats.frame, 0, 0, -sWinW/2+fr/2, sideWinGroup); createBox(fr*2, sWinH, fr, mats.frame, 0, 0, sWinW/2-fr/2, sideWinGroup);
        createBox(fr*2, fr, sWinW, mats.frame, 0, sWinH/2-fr/2, 0, sideWinGroup); createBox(fr*2, fr, sWinW, mats.frame, 0, -sWinH/2+fr/2, 0, sideWinGroup);
        createBox(0.05, sWinH-fr*2, sWinW-fr*2, mats.glass, 0, 0, 0, sideWinGroup, false);

        const frontGroup = new THREE.Group(); upperHouseGroup.add(frontGroup);
        const fm_w = M_W - R_W; frontGroup.position.set(M_W/2 - fm_w/2, 0, M_D/2);
        createBox(fm_w, fr, fr, mats.frame, 0, fr/2, 0, frontGroup); createBox(fm_w, fr, fr, mats.frame, 0, M_H-fr/2, 0, frontGroup);
        createBox(fr, M_H, fr, mats.frame, -fm_w/2+fr/2, M_H/2, 0, frontGroup); createBox(fr, M_H, fr, mats.frame, fm_w/2-fr/2, M_H/2, 0, frontGroup);
        createBox(fr/2, M_H, fr, mats.frame, 0, M_H/2, 0, frontGroup);
        createBox(fm_w/2 - fr, M_H - 2*fr, 0.02, mats.glass, -fm_w/4, M_H/2, 0, frontGroup, false); createBox(fm_w/2 - fr, M_H - 2*fr, 0.02, mats.glass, fm_w/4, M_H/2, 0, frontGroup, false);

        const risGroup = new THREE.Group(); upperHouseGroup.add(risGroup); risGroup.position.set(risalitX, 0, risalitZ);
        createBox(0.2, M_H, R_D, mats.wood, -R_W/2+0.1, M_H/2, 0, risGroup); createBox(0.2, M_H, R_D, mats.wood, R_W/2-0.1, M_H/2, 0, risGroup);
        createBox(R_W, fr, fr, mats.frame, 0, fr/2, R_D/2, risGroup); createBox(R_W, fr, fr, mats.frame, 0, M_H-fr/2, R_D/2, risGroup);
        createBox(fr, M_H, fr, mats.frame, -R_W/2+fr/2, M_H/2, R_D/2, risGroup); createBox(fr, M_H, fr, mats.frame, R_W/2-fr/2, M_H/2, R_D/2, risGroup);
        createBox(R_W-2*fr, M_H-2*fr, 0.02, mats.glass, 0, M_H/2, R_D/2, risGroup, false);

        const roofBaseY = M_H + 0.05; const mrShape = new THREE.Shape(); mrShape.moveTo(-M_D/2 - 0.8, 0); mrShape.lineTo(M_D/2 + 0.8, 0); mrShape.lineTo(0, R_H + 0.2); mrShape.lineTo(-M_D/2 - 0.8, 0);
        const mrGeo = new THREE.ExtrudeGeometry(mrShape, { depth: M_W + 1.0, bevelEnabled: false }); mrGeo.center(); mrGeo.rotateY(Math.PI/2);
        const rrShape = new THREE.Shape(); rrShape.moveTo(-R_W/2 - 0.6, 0); rrShape.lineTo(R_W/2 + 0.6, 0); rrShape.lineTo(0, R_H + 0.1); rrShape.lineTo(-R_W/2 - 0.6, 0);
        const rrGeo = new THREE.ExtrudeGeometry(rrShape, { depth: R_D + M_D/2 + 0.5, bevelEnabled: false }); rrGeo.center();

        const r1_main = new THREE.Mesh(mrGeo, mats.woodStruct); r1_main.scale.set(1, 0.95, 0.95); r1_main.position.y = roofBaseY + R_H/2 - 0.25;
        const r1_ris = new THREE.Mesh(rrGeo, mats.woodStruct); r1_ris.scale.set(0.95, 0.95, 1); r1_ris.position.set(risalitX, roofBaseY + R_H/2 - 0.25, risalitZ - (R_D+M_D/2)/2 + R_D/2);
        roofGroup.add(r1_main); roofGroup.add(r1_ris);
        const r2_main = new THREE.Mesh(mrGeo, mats.insulation); r2_main.scale.set(1, 0.97, 0.97); r2_main.position.y = roofBaseY + R_H/2 - 0.05;
        const r2_ris = new THREE.Mesh(rrGeo, mats.insulation); r2_ris.scale.set(0.97, 0.97, 1); r2_ris.position.set(risalitX, roofBaseY + R_H/2 - 0.05, risalitZ - (R_D+M_D/2)/2 + R_D/2);
        roofGroup.add(r2_main); roofGroup.add(r2_ris);
        const r3_main = new THREE.Mesh(mrGeo, mats.roof); r3_main.position.y = roofBaseY + R_H/2 + 0.15;
        const r3_ris = new THREE.Mesh(rrGeo, mats.roof); r3_ris.position.set(risalitX, roofBaseY + R_H/2 + 0.15, risalitZ - (R_D+M_D/2)/2 + R_D/2);
        roofGroup.add(r3_main); roofGroup.add(r3_ris);

        // --- KEY MODEL ---
        const keyGroup = new THREE.Group(); scene.add(keyGroup); keyGroup.visible = false;
        const goldMat = new THREE.MeshStandardMaterial({ color: 0xffd700, roughness: 0.3, metalness: 1.0, envMapIntensity: 1.0 });
        const keyRing = new THREE.Mesh(new THREE.TorusGeometry(0.8, 0.15, 16, 50), goldMat); keyRing.position.x = -2.0; keyGroup.add(keyRing);
        const keyShaft = new THREE.Mesh(new THREE.CylinderGeometry(0.12, 0.12, 4.5, 16), goldMat); keyShaft.rotation.z = Math.PI / 2; keyShaft.position.x = 0.5; keyGroup.add(keyShaft);
        const keyNeck = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.15, 0.4, 16), goldMat); keyNeck.rotation.z = Math.PI / 2; keyNeck.position.x = -1.3; keyGroup.add(keyNeck);
        const bitGroup = new THREE.Group(); bitGroup.position.set(2.2, -0.3, 0); keyGroup.add(bitGroup);
        bitGroup.add(new THREE.Mesh(new THREE.BoxGeometry(0.8, 0.6, 0.1), goldMat));
        const t1 = new THREE.Mesh(new THREE.BoxGeometry(0.15, 0.4, 0.12), goldMat); t1.position.set(-0.25, -0.4, 0); bitGroup.add(t1);
        const t2 = new THREE.Mesh(new THREE.BoxGeometry(0.15, 0.3, 0.12), goldMat); t2.position.set(0.1, -0.35, 0); bitGroup.add(t2);
        const t3 = new THREE.Mesh(new THREE.BoxGeometry(0.15, 0.5, 0.12), goldMat); t3.position.set(0.35, -0.45, 0); bitGroup.add(t3);

        // --- ANIMATION ---
        gsap.registerPlugin(ScrollTrigger);

        function updateNav(id) {
            document.querySelectorAll('.timeline-item').forEach(el => el.classList.remove('active'));
            const el = document.getElementById(id);
            if(el) el.classList.add('active');
        }

        gsap.to(".main-title", { opacity: 1, y: 0, duration: 2, ease: "power3.out" });
        gsap.to(".slogan", { opacity: 1, y: 0, duration: 2, delay: 0.3 });
        gsap.to(".scroll-indicator", { opacity: 1, duration: 1, delay: 1 });

        const tl = gsap.timeline({
            scrollTrigger: { trigger: "#pin-container", start: "top top", end: "+=10000", pin: true, scrub: 1, anticipatePin: 1 }
        });

        tl.call(() => { houseGroup.visible = true; }, null, "intro");
        tl.to("#rays-container", { opacity: 0.45, duration: 4, ease: "power2.inOut" }, "intro");
        tl.to(".hero-content", { y: -300, opacity: 0, duration: 4, ease: "power2.inOut" }, "intro");
        tl.fromTo(houseGroup.position, { y: -15 }, { y: -1, duration: 4, ease: "power2.out" }, "intro");
        tl.fromTo(houseGroup.scale, { x: 0.5, y: 0.5, z: 0.5 }, { x: 1, y: 1, z: 1, duration: 4 }, "intro");
        tl.fromTo(houseGroup.rotation, { y: 0 }, { y: -Math.PI / 6, duration: 5, ease: "power1.inOut" }, "intro");
        tl.addLabel("rotation_done");

        tl.to(houseGroup.position, { y: -2.5, duration: 4 }, "rotation_done"); 
        tl.to([r3_main.position, r3_ris.position], { y: "+=4.5", duration: 5 }, "rotation_done");
        tl.to([r2_main.position, r2_ris.position], { y: "+=2.5", duration: 5 }, "rotation_done");
        tl.to([r1_main.position, r1_ris.position], { y: "+=1.0", duration: 5 }, "rotation_done");
        tl.fromTo("#sec-roof .feature-content", { x: 100, opacity: 0 }, { x: 0, opacity: 1, duration: 4 }, "rotation_done+=2");
        tl.to({}, { duration: 10 });

        tl.to("#sec-roof .feature-content", { opacity: 0, x: 100, duration: 3 }, "walls");
        tl.to([r3_main.position, r3_ris.position], { y: "-=4.5", duration: 5 }, "walls");
        tl.to([r2_main.position, r2_ris.position], { y: "-=2.5", duration: 5 }, "walls");
        tl.to([r1_main.position, r1_ris.position], { y: "-=1.0", duration: 5 }, "walls");
        tl.to(houseGroup.rotation, { y: -Math.PI / 4, duration: 5 }, "walls");
        tl.to(houseGroup.position, { x: -4, y: -1, z: 15, duration: 5 }, "walls"); 
        tl.to(layOuterObj.position, { x: "+=2.5", duration: 5 }, "walls+=1");
        tl.to(layInsulObj.position, { x: "+=1.8", duration: 5 }, "walls+=1");
        tl.to(layFrameObj.position, { x: "+=1.0", duration: 5 }, "walls+=1");
        tl.fromTo("#sec-walls .feature-content", { x: 100, opacity: 0 }, { x: 0, opacity: 1, duration: 4 }, "walls+=2");
        tl.to({}, { duration: 10 });

        tl.to("#sec-walls .feature-content", { opacity: 0, x: 100, duration: 3 }, "floor");
        tl.to(layOuterObj.position, { x: "-=2.5", duration: 3 }, "floor");
        tl.to(layInsulObj.position, { x: "-=1.8", duration: 3 }, "floor");
        tl.to(layFrameObj.position, { x: "-=1.0", duration: 3 }, "floor");
        tl.to(upperHouseGroup.position, { y: 20, duration: 6, ease: "power2.in" }, "floor+=1");
        tl.to(houseGroup.position, { x: 0, y: 0, z: 5, duration: 5 }, "floor+=2");
        tl.to(houseGroup.rotation, { y: -Math.PI/2, x: 0.5, duration: 6 }, "floor+=2");
        tl.fromTo("#sec-floor .feature-content", { y: 100, x: 0, opacity: 0 }, { y: 0, opacity: 1, duration: 4 }, "floor+=4");
        tl.to({}, { duration: 10 });

        tl.to(".timeline-wrapper", { opacity: 1, duration: 2, pointerEvents: "auto" }, "contract_start");
        tl.to("#sec-floor .feature-content", { opacity: 0, y: -100, duration: 3 }, "contract_start");
        tl.to(houseGroup.scale, { x: 0, y: 0, z: 0, duration: 3 }, "contract_start"); 
        tl.set(contractGroup, { visible: true }, "contract_start+=1");
        tl.call(() => updateNav('tl-contract'), null, "contract_start+=1");
        tl.fromTo(contractGroup.position, {y: -10, z: 0}, {y: 0, z: 5, duration: 4}, "contract_start+=1");
        tl.fromTo(contractGroup.rotation, {x: 1, y: 0}, {x: 0.2, y: 0.1, duration: 4}, "contract_start+=1");
        tl.fromTo("#sec-contract .feature-content", { x: -100, y: 0, opacity: 0 }, { x: 0, opacity: 1, duration: 4 }, "contract_start+=2");
        tl.to({}, { duration: 10 });

        tl.to("#sec-contract .feature-content", { opacity: 0, x: 50, duration: 3 }, "project");
        tl.to(contractGroup.scale, { x: 0, y: 0, z: 0, duration: 3 }, "project");
        tl.call(() => updateNav('tl-project'), null, "project");
        tl.call(() => { blueprintGroup.visible = true; blueprintGroup.rotation.set(0, -Math.PI/6, 0); blueprintGroup.position.set(0, 0, 0); }, null, "project+=1");
        tl.fromTo(blueprintGroup.scale, {x:0, y:0, z:0}, {x:1, y:1, z:1, duration: 4}, "project+=1");
        tl.to(blueprintGroup.rotation, { y: Math.PI/6, duration: 12 }, "project+=1"); 
        tl.fromTo("#sec-blueprint .feature-content", { x: -100, opacity: 0 }, { x: 0, opacity: 1, duration: 4 }, "project+=2");
        tl.to({}, { duration: 10 });

        tl.to("#sec-blueprint .feature-content", { opacity: 0, x: -100, duration: 3 }, "build");
        tl.to(blueprintGroup.scale, {x:0, y:0, z:0, duration: 3}, "build");
        tl.call(() => { updateNav('tl-build'); houseGroup.visible = true; houseGroup.rotation.set(0, -Math.PI/4, 0); }, null, "build");
        tl.fromTo(foundationGroup.position, { y: 0 }, { y: -20, duration: 0.1 }, "build");
        tl.fromTo(upperHouseGroup.position, { y: 0 }, { y: 20, duration: 0.1 }, "build");
        tl.fromTo(roofGroup.position, { y: 0 }, { y: 10, duration: 0.1 }, "build");
        tl.fromTo(houseGroup.scale, { x: 0, y: 0, z: 0 }, { x: 1, y: 1, z: 1, duration: 3 }, "build");
        tl.to(foundationGroup.position, { y: 0, duration: 4, ease: "power2.out" }, "build+=3");
        tl.to(upperHouseGroup.position, { y: 0, duration: 4, ease: "power2.out" }, "build+=4");
        tl.to(roofGroup.position, { y: 0, duration: 3, ease: "bounce.out" }, "build+=5");
        tl.fromTo("#sec-construction .feature-content", { y: 100, x: 0, opacity: 0 }, { y: 0, opacity: 1, duration: 4 }, "build+=6");
        tl.to({}, { duration: 10 });

        tl.to("#sec-construction .feature-content", { opacity: 0, y: -100, duration: 3 }, "keys");
        tl.to(houseGroup.scale, { x: 0, y: 0, z: 0, duration: 3 }, "keys");
        tl.set(keyGroup, { visible: true }, "keys+=1");
        tl.call(() => updateNav('tl-keys'), null, "keys+=1");
        tl.fromTo(keyGroup.scale, { x: 0, y: 0, z: 0 }, { x: 1, y: 1, z: 1, duration: 4, ease: "back.out(1.7)" }, "keys+=1");
        tl.fromTo(keyGroup.rotation, { y: 0, z: 0 }, { y: Math.PI * 2, z: Math.PI / 12, duration: 4 }, "keys+=1");
        tl.fromTo("#sec-keys .feature-content", { x: 100, opacity: 0 }, { x: 0, opacity: 1, duration: 4 }, "keys+=2");
        tl.to({}, { duration: 10 });

        tl.to([".timeline-wrapper", "#webgl-container"], { autoAlpha: 0, duration: 2 }, "exit");
        tl.to({}, { duration: 2 });

        function animate() {
            requestAnimationFrame(animate);
            if(blueprintGroup.visible) blueprintGroup.rotation.y += 0.002;
            if(contractGroup.visible) contractGroup.rotation.y += 0.002;
            if(keyGroup.visible) keyGroup.rotation.x += 0.01; 
            composer.render();
        }
        animate();

        function onResize() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const aspect = width / height;
            camera.aspect = aspect;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
            composer.setSize(width, height);
            if (aspect < 1.0) {
                camera.position.z = 65; camera.position.y = 5;
            } else {
                camera.position.z = 35; camera.position.y = 2;
            }
        }
        window.addEventListener('resize', onResize);
        onResize();

        // --- DOCK ANIMATION LOGIC ---
        const dockWrapper = document.querySelector('.dock-wrapper');
        const dockItems = document.querySelectorAll('.dock-item');
        const baseWidth = 50;
        const maxScale = 1.8; 
        const range = 150;

        if(window.matchMedia("(min-width: 769px)").matches) {
            dockWrapper.addEventListener('mousemove', (e) => {
                const mouseX = e.clientX;
                dockItems.forEach(item => {
                    const rect = item.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const dist = Math.abs(mouseX - centerX);
                    
                    let scale = 1;
                    if (dist < range) {
                        scale = 1 + (maxScale - 1) * (1 - dist / range); 
                    }
                    
                    item.style.width = `${baseWidth * scale}px`;
                    item.style.height = `${baseWidth * scale}px`;
                });
            });

            dockWrapper.addEventListener('mouseleave', () => {
                dockItems.forEach(item => {
                    item.style.width = `${baseWidth}px`;
                    item.style.height = `${baseWidth}px`;
                });
            });
        }

        // --- PHONE SELECTOR LOGIC ---
        const countries = [
            { name: '–†–æ—Å—Å–∏—è', code: '+7', flag: 'üá∑üá∫' },
            { name: '–ë–µ–ª–∞—Ä—É—Å—å', code: '+375', flag: 'üáßüáæ' },
            { name: '–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', code: '+7', flag: 'üá∞üáø' },
            { name: '–ê—Ä–º–µ–Ω–∏—è', code: '+374', flag: 'üá¶üá≤' },
            { name: '–ì—Ä—É–∑–∏—è', code: '+995', flag: 'üá¨üá™' },
            { name: '–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω', code: '+998', flag: 'üá∫üáø' },
            { name: '–ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω', code: '+996', flag: 'üá∞üá¨' },
            { name: '–¢—É—Ä—Ü–∏—è', code: '+90', flag: 'üáπüá∑' },
            { name: '–û–ê–≠', code: '+971', flag: 'üá¶üá™' },
            { name: 'USA', code: '+1', flag: 'üá∫üá∏' }
        ];

        const select = document.getElementById('country-select');
        const list = document.getElementById('country-list');
        const flagSpan = document.getElementById('current-flag');
        const input = document.getElementById('phone-input');

        countries.forEach(country => {
            const item = document.createElement('div');
            item.className = 'country-item';
            item.innerHTML = `<span class="c-flag">${country.flag}</span><span class="c-name">${country.name}</span><span class="c-code">${country.code}</span>`;
            item.onclick = () => {
                flagSpan.textContent = country.flag;
                input.value = country.code + ' ';
                list.classList.remove('active');
            };
            list.appendChild(item);
        });

        select.onclick = (e) => {
            e.stopPropagation();
            list.classList.toggle('active');
        };

        document.onclick = (e) => {
            if (!select.contains(e.target) && !list.contains(e.target)) {
                list.classList.remove('active');
            }
        };

    })();
    </script>
</body>
</html>
```